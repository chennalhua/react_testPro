(this.webpackJsonpismart_golden=this.webpackJsonpismart_golden||[]).push([[0],{226:function(e,t,n){},373:function(e,t){},376:function(e,t){},378:function(e,t){},389:function(e,t){},391:function(e,t){},419:function(e,t){},421:function(e,t){},422:function(e,t){},427:function(e,t){},429:function(e,t){},435:function(e,t){},437:function(e,t){},456:function(e,t){},468:function(e,t){},471:function(e,t){},491:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),o=n(212),i=n.n(o),s=(n(226),n(218)),r=n(9),l=n(73),d=n(10),u=n(29),b=n(221),f=n(74),j=n(24),p=n.n(j),h=n(72),m=n(55),x=n(45),O=n.n(x),v=n(44),g=n.n(v),w=n(115),y=n.n(w),N=n(216),S=n.n(N),C=n(217),k=n.n(C),_=n(1),T=function(){var e,t,n=Object(c.useState)(""),a=Object(d.a)(n,2),o=a[0],i=a[1],s=p()(32).toString("hex"),r=p()(32).toString("hex"),j=function(){var e="https://access.line.me/oauth2/v2.1/authorize?";e+="response_type=code",e+="&client_id=".concat("1656692096"),e+="&redirect_uri=".concat("https://chennalhua.github.io/testtest/"),e+="&state=".concat(s),e+="&nonce=".concat(r),e+="&scope=openid%20profile",e+="&prompt=consent",e+="&bot_prompt=normal",window.location.href=e};Object(c.useEffect)((function(){var e=y.a.parse(window.location.href,!0).query;0===Object.keys(e).length&&j()}));Object(c.useEffect)((function(){!function(e){var t=y.a.parse(e,!0).query;if(Object.prototype.hasOwnProperty.call(t,"code")){var n={grant_type:"authorization_code",code:t.code,redirect_uri:"".concat("https://chennalhua.github.io/testtest/"),client_id:"".concat("1656692096"),client_secret:"".concat("8664461fb88612dbf7ab59d5721aea3a")};g.a.post("https://api.line.me/oauth2/v2.1/token",S.a.stringify(n),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){try{var t=k.a.verify(e.data.id_token,"".concat("8664461fb88612dbf7ab59d5721aea3a"),{algorithms:["HS256"],audience:"".concat("1656692096").toString(),issuer:"https://access.line.me"});i(t.sub),L(t.sub)}catch(n){console.log(n)}})).catch((function(e){console.log(e)}))}else t.error&&O.a.fire({icon:"error",title:"\u767b\u5165\u5931\u6557 ><",text:"\u9700\u300c\u8a31\u53ef\u300d\u6388\u6b0a\uff0c\u624d\u80fd\u9a57\u8b49\u767b\u5165",confirmButtonText:"\u91cd\u65b0\u767b\u5165"}).then((function(){j()}))}(window.location.href)}));var x=f.a().shape({uid:f.b().required("\u8acb\u6b63\u78ba\u8f38\u5165\u5e33\u865f"),pwd:f.b().required("\u8acb\u6b63\u78ba\u8f38\u5165\u5bc6\u78bc")}),v={resolver:Object(b.a)(x)},w=Object(u.d)(v),N=w.register,C=w.handleSubmit,T=w.reset,R=w.formState.errors,B=Object(c.useState)(!1),F=Object(d.a)(B,1)[0],L=function(e){var t=new URLSearchParams;t.append("lineid","Ufb5a74fdae4e3fb897371a8ac2f55dde");var n="".concat("/api/","LineLogin");g.a.post(n,t,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"}}).then((function(e){"-2"===e.data.ResponseCode?alert("\u96e2\u8077 ing"):"-3"===e.data.ResponseCode?O.a.fire({icon:"info",title:"\u4e0d\u5728\u4f7f\u7528\u6b0a\u9650\u5167",text:"\u8acb\u9032\u884c\u696d\u7ba1\u7cfb\u300a\u5e33\u865f\u3001\u5bc6\u78bc\u300b\u767b\u5165\u9a57\u8b49",confirmButtonText:"\u597d\u7684"}):alert("\u53ef\u4f7f\u7528")})).catch((function(e){console.log(e)}))},E=Object(c.useState)(!0),P=Object(d.a)(E,2),q=P[0],U=P[1];return Object(_.jsx)("div",{children:Object(_.jsx)("div",{className:"container-fluid bg-mask vh-100",children:Object(_.jsx)("div",{className:"container",children:Object(_.jsx)("div",{className:"d-flex justify-content-center",children:Object(_.jsxs)("form",{onSubmit:C((function(e){U(!0);var t=new URLSearchParams;t.append("lineid",o),t.append("uid",e.uid),t.append("pwd",e.pwd);var n="".concat("/api/","SalesLogin");g.a.post(n,t).then((function(e){console.log(e),"0"===e.data.ResponseCode?(O.a.fire({icon:"success",title:"!!\u9a57\u8b49\u6210\u529f!!",text:"\u6b61\u8fce\u4f7f\u7528 iSmart +",confirmButtonText:"\u95dc\u9589"}),T()):"-4"===e.data.ResponseCode?O.a.fire({icon:"info",title:"\u6b64\u5e33\u865f\u4e0d\u5b58\u5728 ><",text:"\u8acb\u78ba\u8a8d\u5e33\u865f\u662f\u5426\u8f38\u5165\u6b63\u78ba",confirmButtonText:"\u95dc\u9589"}):"-5"===e.data.ResponseCode&&O.a.fire({icon:"error",title:"\u5bc6\u78bc\u932f\u8aa4 ><",text:"\u8acb\u78ba\u8a8d\u5e33\u865f\u5bc6\u78bc\u662f\u5426\u8f38\u5165\u6b63\u78ba",confirmButtonText:"\u95dc\u9589"})})).catch((function(e){console.log(e),T()}))})),className:"col-12 col-md-6 col-lg-4",children:[Object(_.jsxs)("div",{className:"form-group my-3",children:[Object(_.jsx)("label",{htmlFor:"uid",className:"fw-bolder text-golden-brown",children:"\u8acb\u8f38\u5165\u300a\u696d\u7ba1\u7cfb\u7d71\u300b\u5e33\u865f"}),Object(_.jsx)("input",Object(l.a)(Object(l.a)({id:"uid",name:"uid",type:"text"},N("uid")),{},{className:"form-control ".concat(R.uid?"is-invalid":"")})),Object(_.jsx)("div",{className:"invalid-feedback",children:null===(e=R.uid)||void 0===e?void 0:e.message})]}),Object(_.jsxs)("div",{className:"form-group my-3 position-relative",children:[Object(_.jsx)("label",{htmlFor:"pwd",className:"fw-bolder text-golden-brown",children:"\u8acb\u8f38\u5165\u300a\u696d\u7ba1\u7cfb\u7d71\u300b\u5bc6\u78bc"}),Object(_.jsx)("input",Object(l.a)({id:"pwd",name:"pwd",type:q?"password":"text",className:"form-control ".concat(R.pwd?"is-invalid":"")},N("pwd"))),Object(_.jsx)("div",{className:"invalid-feedback",children:null===(t=R.pwd)||void 0===t?void 0:t.message}),Object(_.jsx)("button",{type:"button",className:"btn text-dark-blue position-absolute",style:{right:"-1px",top:"24px"},onClick:function(){U(!q)},children:Object(_.jsx)(h.a,{icon:q?m.a:m.b})})]}),Object(_.jsxs)("button",{type:"submit",className:"btn btn-golden-brown w-100 mt-3",disabled:F?"disabled":"",children:[Object(_.jsx)("div",{className:"spinner-border text-light spinner-border--width mx-2 ".concat(F?"d-inline-block":"d-none"),style:{width:"1rem",height:"1rem"},role:"status"}),"\u767b\u5165"]})]})})})})})},R=function(){var e=Object(c.useState)(!0),t=Object(d.a)(e,2),n=(t[0],t[1]),a=Object(c.useState)([]),o=Object(d.a)(a,2),i=o[0],s=o[1];Object(c.useEffect)((function(){var e="".concat("/api/","Gcd/loc=");console.log(e),g.a.get(e).then((function(e){"-1"!=e.data.ResponseCode?(s(e.data),n(!1)):console.log("-1")})).catch((function(e){console.log(e)}))}),[]);var r=[];i.forEach((function(e,t){r.push(e.location)}));var l=r.filter((function(e,t,n){return n.indexOf(e)===t})),u=Object(c.useState)("\u7e3d\u516c\u53f8"),b=Object(d.a)(u,2),f=b[0],j=b[1],p=Object(c.useState)("\u8463\u4e8b\u9577\u5ba4"),x=Object(d.a)(p,2),O=x[0],v=x[1],w=[];!function(e){e.forEach((function(e,t){f===e.location&&w.push(e.department)}))}(i);var y=w.filter((function(e,t,n){return n.indexOf(e)===t}));return Object(_.jsx)(_.Fragment,{children:Object(_.jsxs)("div",{className:"container mt-3",children:[Object(_.jsx)("h5",{children:"\u516c\u53f8\u901a\u8a0a \u9801\u9762"}),Object(_.jsxs)("p",{children:["\u76ee\u524d\u74b0\u5883:","production"]}),Object(_.jsxs)("div",{className:"d-flex pb-2",children:[Object(_.jsx)("select",{className:"form-select",value:f,onChange:function(e){var t=e.target.value;j(t),i.map((function(e){return t===e.location&&v(e.department),!0}))},children:l.map((function(e,t){return Object(_.jsx)("option",{value:e,children:e},e)}))}),Object(_.jsx)("select",{className:"form-select ms-2",value:O,onChange:function(e){var t=e.target.value;v(t)},children:y.map((function(e,t){return Object(_.jsx)("option",{value:e,children:e},e)}))})]}),Object(_.jsx)("ul",{className:"list-unstyled page-content-link fw-bolder",value:!0,children:i.map((function(e,t){return f!==e.location||O!==e.department||Object(_.jsx)("li",{className:"border-bottom py-3",children:Object(_.jsxs)("div",{className:"d-flex justify-content-between flex-wrap",children:[Object(_.jsxs)("span",{children:[Object(_.jsx)(h.a,{className:"me-2 text-dark-blue",icon:m.c}),e.contact]}),Object(_.jsxs)("span",{children:[""===e.extension?" - ":e.extension," /",Object(_.jsx)("a",{href:"tel:+886-".concat(e.telephone),className:"ms-2",children:e.telephone})]})]})},t)}))})]})})},B=function(e){return Object(_.jsxs)(s.a,{children:[Object(_.jsx)(r.a,{exact:!0,path:"/",children:Object(_.jsx)(T,{})})," ",Object(_.jsx)(r.a,{exact:!0,path:"/test",children:Object(_.jsx)(R,{})})," "]})},F=function(){return Object(_.jsx)(B,{})},L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,492)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),o(e),i(e)}))};i.a.render(Object(_.jsx)(a.a.StrictMode,{children:Object(_.jsx)(F,{})}),document.getElementById("root")),L()}},[[491,1,2]]]);
//# sourceMappingURL=main.0afb08f0.chunk.js.map